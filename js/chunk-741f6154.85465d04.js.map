{"version":3,"sources":["webpack:///./node_modules/binconv/dist/src/blobToUint8Array.js","webpack:///./node_modules/binconv/dist/src/stringToUint8Array.js","webpack:///./node_modules/binconv/dist/src/blobToArrayBuffer.js","webpack:///./node_modules/vue-async-computed-decorator/dist/index.js","webpack:///./src/components/DataUploader.vue?ecd0","webpack:///./src/components/DataUploader.vue","webpack:///./src/components/DataUploader.vue?7600","webpack:///./src/components/DataUploader.vue?5df2"],"names":["Object","defineProperty","exports","value","blobToArrayBuffer_1","blobToUint8Array","blob","blobToArrayBuffer","then","buff","Uint8Array","default","stringToUint8Array","str","numbers","map","call","c","charCodeAt","Promise","resolve","reject","fileReader","FileReader","onload","arrayBuffer","result","onerror","readAsArrayBuffer","__assign","this","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","apply","__esModule","vue_class_component_1","AsyncComputed","computedOptions","createDecorator","options","key","asyncComputed","undefined","methods","Error","method","get","render","_vm","_h","$createElement","_c","_self","attrs","isDoneUpload","hasError","scopedSlots","_u","fn","staticStyle","headerIconColor","_v","_s","headerIcon","proxy","strings","props","uploadNo","isReadyToUpload","progressPercentage","toFixed","protection","type","verificationStep","_e","verificationCode","on","$event","verify","icons","mdiCheck","mdiCancel","directives","name","rawName","expression","ref","_g","readableBytesString","progressSetting","loadedBytes","totalBytes","staticClass","uploadPath","cancelUpload","mdiCloseCircle","domProps","errorMessage","staticRenderFns","utils","errorMessageDelegate","canceled","isCompressing","isEncrypting","mdi","xhr","XMLHttpRequest","$el","send","password","keyExchange","serverUrl","secretPath","keyExchangeRes","errorCode","verified","verifiedParcel","JSON","stringify","encryptedVerifiedParcel","verifiedPath","path","fetch","body","data","Blob","files","zipBlob","plainBody","bodyLength","size","plainBodyArray","encrypted","byteLength","open","responseType","upload","onprogress","ev","loaded","total","status","response","responseText","abort","self","notCompressingAndEncrypting","language","components","VerificationCode","component","VAlert","VBtn","VExpansionPanel","VExpansionPanelContent","VExpansionPanelHeader","VFlex","VIcon","VLayout","VProgressLinear","VSimpleTable","VTooltip"],"mappings":"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","file":"js/chunk-741f6154.85465d04.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar blobToArrayBuffer_1 = require(\"./blobToArrayBuffer\");\nfunction blobToUint8Array(blob) {\n    return blobToArrayBuffer_1.blobToArrayBuffer(blob).then(function (buff) { return new Uint8Array(buff); });\n}\nexports.blobToUint8Array = blobToUint8Array;\nexports.default = blobToUint8Array;\n//# sourceMappingURL=blobToUint8Array.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction stringToUint8Array(str) {\n    var numbers = [].map.call(str, function (c) {\n        return c.charCodeAt(0);\n    });\n    return new Uint8Array(numbers);\n}\nexports.stringToUint8Array = stringToUint8Array;\nexports.default = stringToUint8Array;\n//# sourceMappingURL=stringToUint8Array.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction blobToArrayBuffer(blob) {\n    return new Promise(function (resolve, reject) {\n        var fileReader = new FileReader();\n        fileReader.onload = function () {\n            var arrayBuffer = fileReader.result;\n            resolve(arrayBuffer);\n        };\n        fileReader.onerror = reject;\n        fileReader.readAsArrayBuffer(blob);\n    });\n}\nexports.blobToArrayBuffer = blobToArrayBuffer;\nexports.default = blobToArrayBuffer;\n//# sourceMappingURL=blobToArrayBuffer.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nvar vue_class_component_1 = require(\"vue-class-component\");\nfunction AsyncComputed(computedOptions) {\n    return vue_class_component_1.createDecorator(function (options, key) {\n        options.asyncComputed = options.asyncComputed || {};\n        if (options.methods === undefined) {\n            throw new Error(\"methods is undefined\");\n        }\n        var method = options.methods[key];\n        options.asyncComputed[key] = __assign({ get: method }, computedOptions);\n        delete options.methods[key];\n    });\n}\nexports[\"default\"] = AsyncComputed;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-expansion-panel',{attrs:{\"active\":\"true\"}},[_c('v-expansion-panel-header',{attrs:{\"disable-icon-rotate\":_vm.isDoneUpload || _vm.hasError},scopedSlots:_vm._u([{key:\"actions\",fn:function(){return [_c('v-icon',{staticStyle:{\"margin-left\":\"0.3em\"},attrs:{\"color\":_vm.headerIconColor}},[_vm._v(\" \"+_vm._s(_vm.headerIcon)+\" \")])]},proxy:true}])},[_c('span',[_vm._v(_vm._s(_vm.strings['upload'])+\" #\"+_vm._s(_vm.props.uploadNo))]),_vm._v(\" \"+_vm._s(_vm.isReadyToUpload ? _vm.progressPercentage && ((_vm.progressPercentage.toFixed(2)) + \" %\") : '')+\" \")]),_c('v-expansion-panel-content',[(_vm.props.protection.type === 'passwordless' && _vm.verificationStep.type === 'initial')?_c('v-alert',{attrs:{\"type\":\"info\"}},[_c('span',{},[_vm._v(_vm._s(_vm.strings['waiting_for_receiver']))])]):_vm._e(),(_vm.props.protection.type === 'passwordless' && _vm.verificationStep.type === 'verification_code_arrived')?_c('span',[_c('VerificationCode',{attrs:{\"value\":_vm.verificationStep.verificationCode}}),_c('v-layout',[_c('v-flex',{attrs:{\"xs6\":\"\"}},[_c('v-btn',{attrs:{\"color\":\"success\",\"block\":\"\"},on:{\"click\":function($event){return _vm.verify(true)}}},[_c('v-icon',{attrs:{\"left\":\"\",\"dark\":\"\"}},[_vm._v(_vm._s(_vm.icons.mdiCheck))]),_vm._v(\" \"+_vm._s(_vm.strings['verify_and_send'])+\" \")],1)],1),_c('v-flex',{attrs:{\"xs6\":\"\"}},[_c('v-btn',{attrs:{\"color\":\"error\",\"block\":\"\"},on:{\"click\":function($event){return _vm.verify(false)}}},[_c('v-icon',{attrs:{\"left\":\"\",\"dark\":\"\"}},[_vm._v(_vm._s(_vm.icons.mdiCancel))]),_vm._v(\" \"+_vm._s(_vm.strings['cancel'])+\" \")],1)],1)],1)],1):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isCompressing),expression:\"isCompressing\"}]},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\" \"+_vm._s(_vm.strings['compressing'])+\" \")]),_c('v-progress-linear',{attrs:{\"indeterminate\":\"\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isEncrypting),expression:\"isEncrypting\"}]},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\" \"+_vm._s(_vm.strings['encrypting'])+\" \")]),_c('v-progress-linear',{attrs:{\"indeterminate\":\"\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isReadyToUpload),expression:\"isReadyToUpload\"}]},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('div',_vm._g({staticStyle:{\"text-align\":\"center\"}},on),[_vm._v(\" \"+_vm._s(_vm.readableBytesString(_vm.progressSetting.loadedBytes, 1))+\" of \"+_vm._s(_vm.readableBytesString(_vm.progressSetting.totalBytes, 1))+\" \")])]}}])},[_c('span',[_vm._v(_vm._s(_vm.progressSetting.loadedBytes)+\" of \"+_vm._s(_vm.progressSetting.totalBytes))])]),_c('v-progress-linear',{attrs:{\"value\":_vm.progressPercentage}})],1),_c('v-simple-table',{staticClass:\"text-left\"},[_c('tbody',[_c('tr',{staticClass:\"text-left\"},[_c('td',[_vm._v(_vm._s(_vm.strings['upload_url']))]),_c('td',[_vm._v(_vm._s(_vm.uploadPath))])])])]),(_vm.isCancelable)?_c('div',{staticStyle:{\"text-align\":\"right\"}},[_c('v-btn',{staticClass:\"ma-2 justify-end\",attrs:{\"color\":\"warning\",\"outlined\":\"\"},on:{\"click\":function($event){return _vm.cancelUpload()}}},[_c('v-icon',[_vm._v(_vm._s(_vm.icons.mdiCloseCircle))]),_vm._v(\" \"+_vm._s(_vm.strings['cancel'])+\" \")],1)],1):_vm._e(),_c('v-alert',{attrs:{\"type\":\"error\",\"outlined\":\"\",\"value\":_vm.hasError},domProps:{\"innerHTML\":_vm._s(_vm.errorMessage)}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {Component, Prop, Vue} from 'vue-property-decorator';\nimport urlJoin from 'url-join';\nimport {blobToUint8Array} from 'binconv/dist/src/blobToUint8Array';\nimport {stringToUint8Array} from 'binconv/dist/src/stringToUint8Array';\n\nimport * as utils from '@/utils';\nimport * as pipingUiUtils from \"@/piping-ui-utils\";\nimport {globalStore} from \"@/vue-global\";\nimport {strings} from \"@/strings\";\nimport {mdiAlert, mdiCancel, mdiCheck, mdiChevronDown, mdiCloseCircle} from \"@mdi/js\";\nimport AsyncComputed from 'vue-async-computed-decorator';\nimport type {Protection, VerificationStep, VerifiedParcel} from \"@/datatypes\";\nimport VerificationCode from \"@/components/VerificationCode.vue\";\nimport {pipingUiAuthAsync} from \"@/pipingUiAuthWithWebpackChunkName\"\n\n\nexport type DataUploaderProps = {\n  uploadNo: number,\n  data: File[] | string,\n  serverUrl: string,\n  secretPath: string,\n  protection: Protection,\n};\n\n// NOTE: Automatically upload when mounted\n@Component({\n  components: {\n    VerificationCode,\n  },\n})\nexport default class DataUploader extends Vue {\n  @Prop() private props!: DataUploaderProps;\n\n  // Progress bar setting\n  private progressSetting: {loadedBytes: number, totalBytes?: number} = {\n    loadedBytes: 0,\n    totalBytes: undefined,\n  };\n\n  private readableBytesString = utils.readableBytesString;\n\n  // NOTE: Function makes dynamic language-switch support possible\n  //       Delegation is to reassign this value\n  private errorMessageDelegate: () => string | Promise<string> =\n    () => \"\";\n  @AsyncComputed()\n  async errorMessage(): Promise<string> {\n    return this.errorMessageDelegate();\n  }\n  private xhr: XMLHttpRequest;\n  private canceled: boolean = false;\n  private isCompressing: boolean = false;\n  private isEncrypting: boolean = false;\n  private verificationStep: VerificationStep = {type: 'initial'};\n\n  private icons = {\n    mdiCloseCircle,\n    mdiCheck,\n    mdiCancel,\n  };\n\n  private get progressPercentage(): number | null {\n    if (this.progressSetting.totalBytes === undefined) {\n      return null;\n    } else if (this.progressSetting.totalBytes === 0) {\n      return 100;\n    } else {\n      return this.progressSetting.loadedBytes / this.progressSetting.totalBytes * 100;\n    }\n  }\n\n  private get isDoneUpload(): boolean {\n    return this.progressPercentage === 100;\n  }\n\n  private get uploadPath(): string {\n    return urlJoin(this.props.serverUrl, this.props.secretPath);\n  }\n\n  @AsyncComputed()\n  private async hasError(): Promise<boolean> {\n    return await this.errorMessageDelegate() !== \"\";\n  }\n\n  private get headerIcon(): string {\n    // NOTE: getter `hasError` is created by @AsyncComputed\n    const self = (this as unknown as {hasError: boolean});\n    if (self.hasError) {\n      return mdiAlert;\n    } else if (this.canceled) {\n      return mdiCloseCircle;\n    } else if (this.isDoneUpload) {\n      return mdiCheck;\n    } else {\n      return mdiChevronDown;\n    }\n  }\n\n  private get headerIconColor(): string | undefined {\n    // NOTE: Getter `hasError` is created by @AsyncComputed\n    const self = (this as unknown as {hasError: boolean});\n    if (self.hasError) {\n      return \"error\";\n    } else if (this.canceled) {\n      return \"warning\";\n    } else if (this.isDoneUpload) {\n      return \"teal\";\n    } else {\n      return undefined\n    }\n  }\n\n  private get isCancelable(): boolean {\n    return this.isReadyToUpload && !this.isDoneUpload && !this.hasError && !this.canceled;\n  }\n\n  private get isReadyToUpload(): boolean {\n    const notCompressingAndEncrypting = !this.isCompressing && !this.isEncrypting;\n    if (this.props.protection.type === 'passwordless') {\n      return this.verificationStep.type === 'verified' && this.verificationStep.verified && notCompressingAndEncrypting;\n    } else {\n      return notCompressingAndEncrypting;\n    }\n  }\n\n  // for language support\n  private get strings() {\n    return strings(globalStore.language);\n  }\n\n  constructor() {\n    super();\n    this.xhr = new XMLHttpRequest();\n  }\n\n  async mounted() {\n    // Scroll to this element\n    // NOTE: no need to add `await`\n    pipingUiUtils.scrollTo(this.$el);\n\n    switch (this.props.protection.type) {\n      case 'raw':\n        // Send\n        await this.send(undefined);\n        break;\n      case 'password':\n        // Send\n        await this.send(this.props.protection.password);\n        break;\n      case 'passwordless': {\n        // Key exchange\n        const keyExchangeRes = await (await pipingUiAuthAsync).keyExchange(this.props.serverUrl, 'sender', this.props.secretPath);\n        if (keyExchangeRes.type === 'error') {\n          this.verificationStep = {type: 'error'};\n          this.errorMessageDelegate = () => this.strings['key_exchange_error'](keyExchangeRes.errorCode);\n          return;\n        }\n        const {key, verificationCode} = keyExchangeRes;\n        this.verificationStep = {type: 'verification_code_arrived', verificationCode, key};\n        break;\n      }\n    }\n  }\n\n  private async verify(verified: boolean) {\n    if (this.verificationStep.type !== 'verification_code_arrived') {\n      throw new Error(\"Unexpected state: this.verificationStep.type should be 'verification_code_arrived'\");\n    }\n    const {key} = this.verificationStep;\n    this.verificationStep = {type: 'verified', verified};\n\n\n    const verifiedParcel: VerifiedParcel = {\n      verified,\n    };\n    const encryptedVerifiedParcel = await utils.encrypt(\n      stringToUint8Array(JSON.stringify(verifiedParcel)),\n      key,\n    );\n    const path = urlJoin(this.props.serverUrl, await (await pipingUiAuthAsync).verifiedPath(this.props.secretPath));\n    // Send verified or not\n    await fetch(path, {\n      method: 'POST',\n      body: encryptedVerifiedParcel,\n    });\n\n    // If verified, send\n    if (verified) {\n      await this.send(key);\n    }\n  }\n\n  private async send(password: string | Uint8Array | undefined) {\n    const data: File[] | string = this.props.data;\n\n    const plainBody: Blob = await (async () => {\n      // Text\n      if (typeof data === \"string\") {\n        return new Blob([data]);\n        // One file\n      } else if (data.length === 1) {\n        return data[0];\n        // Multiple files\n      } else {\n        const files: File[] = data;\n        this.isCompressing = true;\n        // Zip files\n        const zipBlob: Blob = await utils.zipFilesAsBlob(files);\n        this.isCompressing = false;\n        return zipBlob;\n      }\n    })();\n\n    const {body, bodyLength} = await (async () => {\n      // If password protection is disabled\n      if (password === undefined) {\n        // Return as plain\n        return {body: plainBody, bodyLength: plainBody.size};\n      } else {\n        this.isEncrypting = true;\n        // Convert plain body blob to Uint8Array\n        const plainBodyArray: Uint8Array = await blobToUint8Array(plainBody);\n        // Get encrypted\n        // NOTE: In the future, ReadableStream can be uploaded.\n        // (see: https://github.com/whatwg/fetch/pull/425#issuecomment-518899855)\n        const encrypted: Uint8Array = await utils.encrypt(plainBodyArray, password);\n        this.isEncrypting = false;\n        return {body: encrypted, bodyLength: encrypted.byteLength};\n      }\n    })();\n\n    // Send\n    this.xhr.open('POST', this.uploadPath, true);\n    this.xhr.responseType = 'text';\n    // Update progress bar\n    this.xhr.upload.onprogress = (ev) => {\n      this.progressSetting.loadedBytes = ev.loaded;\n      this.progressSetting.totalBytes  = ev.total;\n    };\n    this.xhr.upload.onload = () => {\n      // Send finished\n      if (this.xhr.status === 200) {\n        if (this.progressSetting.totalBytes !== undefined) {\n          this.progressSetting.loadedBytes = this.progressSetting.totalBytes;\n        }\n      }\n    };\n    this.xhr.onload = () => {\n      if (this.xhr.status !== 200) {\n        this.errorMessageDelegate = () => this.strings['xhr_status_error']({\n          status: this.xhr.status,\n          response: this.xhr.responseText\n        });\n      }\n    };\n    this.xhr.onerror = (ev) => {\n      this.errorMessageDelegate = () => this.strings['data_uploader_xhr_onerror']({serverUrl: this.props.serverUrl});\n    };\n    this.xhr.upload.onerror = () => {\n      this.errorMessageDelegate = () => this.strings['data_uploader_xhr_upload_onerror'];\n    };\n    this.xhr.send(body);\n    // Initialize progress bar\n    this.progressSetting.loadedBytes = 0;\n    this.progressSetting.totalBytes = bodyLength;\n  }\n\n  private cancelUpload(): void {\n    this.xhr.abort();\n    this.canceled = true;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataUploader.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataUploader.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DataUploader.vue?vue&type=template&id=3d76ea36&scoped=true&\"\nimport script from \"./DataUploader.vue?vue&type=script&lang=ts&\"\nexport * from \"./DataUploader.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3d76ea36\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAlert } from 'vuetify/lib/components/VAlert';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VExpansionPanel } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanelContent } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanelHeader } from 'vuetify/lib/components/VExpansionPanel';\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VProgressLinear } from 'vuetify/lib/components/VProgressLinear';\nimport { VSimpleTable } from 'vuetify/lib/components/VDataTable';\nimport { VTooltip } from 'vuetify/lib/components/VTooltip';\ninstallComponents(component, {VAlert,VBtn,VExpansionPanel,VExpansionPanelContent,VExpansionPanelHeader,VFlex,VIcon,VLayout,VProgressLinear,VSimpleTable,VTooltip})\n"],"sourceRoot":""}